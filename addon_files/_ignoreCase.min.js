(()=>{"use strict";function e(){}function t(e,t,n,o,r){for(var s=0,i=t.length,u=0,a=0;s<i;s++){var p=t[s];if(p.removed){if(p.value=e.join(o.slice(a,a+p.count)),a+=p.count,s&&t[s-1].added){var c=t[s-1];t[s-1]=t[s],t[s]=c}}else{if(!p.added&&r){var l=n.slice(u,u+p.count);l=l.map((function(e,t){var n=o[a+t];return n.length>e.length?n:e})),p.value=e.join(l)}else p.value=e.join(n.slice(u,u+p.count));u+=p.count,p.added||(a+=p.count)}}var f=t[i-1];return i>1&&"string"==typeof f.value&&(f.added||f.removed)&&e.equals("",f.value)&&(t[i-2].value+=f.value,t.pop()),t}e.prototype={diff:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o.callback;"function"==typeof o&&(r=o,o={}),this.options=o;var s=this;function i(e){return r?(setTimeout((function(){r(void 0,e)}),0),!0):e}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e));var u=(n=this.removeEmpty(this.tokenize(n))).length,a=e.length,p=1,c=u+a;o.maxEditLength&&(c=Math.min(c,o.maxEditLength));var l=[{newPos:-1,components:[]}],f=this.extractCommon(l[0],n,e,0);if(l[0].newPos+1>=u&&f+1>=a)return i([{value:this.join(n),count:n.length}]);function d(){for(var o=-1*p;o<=p;o+=2){var r=void 0,c=l[o-1],f=l[o+1],d=(f?f.newPos:0)-o;c&&(l[o-1]=void 0);var h=c&&c.newPos+1<u,v=f&&0<=d&&d<a;if(h||v){if(!h||v&&c.newPos<f.newPos?(r={newPos:(m=f).newPos,components:m.components.slice(0)},s.pushComponent(r.components,void 0,!0)):((r=c).newPos++,s.pushComponent(r.components,!0,void 0)),d=s.extractCommon(r,n,e,o),r.newPos+1>=u&&d+1>=a)return i(t(s,r.components,n,e,s.useLongestToken));l[o]=r}else l[o]=void 0}var m;p++}if(r)!function e(){setTimeout((function(){if(p>c)return r();d()||e()}),0)}();else for(;p<=c;){var h=d();if(h)return h}},pushComponent:function(e,t,n){var o=e[e.length-1];o&&o.added===t&&o.removed===n?e[e.length-1]={count:o.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,o){for(var r=t.length,s=n.length,i=e.newPos,u=i-o,a=0;i+1<r&&u+1<s&&this.equals(t[i+1],n[u+1]);)i++,u++,a++;return a&&e.components.push({count:a}),e.newPos=i,u},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};var n=new e,o=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,r=/\S/,s=new e;s.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!r.test(e)&&!r.test(t)},s.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&o.test(t[n])&&o.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};var i=new e;function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}i.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var o=0;o<n.length;o++){var r=n[o];o%2&&!this.options.newlineIsToken?t[t.length-1]+=r:(this.options.ignoreWhitespace&&(r=r.trim()),t.push(r))}return t},(new e).tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},(new e).tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var a=Object.prototype.toString,p=new e;function c(e,t,n,o,r){var s,i;for(t=t||[],n=n||[],o&&(e=o(r,e)),s=0;s<t.length;s+=1)if(t[s]===e)return n[s];if("[object Array]"===a.call(e)){for(t.push(e),i=new Array(e.length),n.push(i),s=0;s<e.length;s+=1)i[s]=c(e[s],t,n,o,r);return t.pop(),n.pop(),i}if(e&&e.toJSON&&(e=e.toJSON()),"object"===u(e)&&null!==e){t.push(e),i={},n.push(i);var p,l=[];for(p in e)e.hasOwnProperty(p)&&l.push(p);for(l.sort(),s=0;s<l.length;s+=1)i[p=l[s]]=c(e[p],t,n,o,p);t.pop(),n.pop()}else i=e;return i}p.useLongestToken=!0,p.tokenize=i.tokenize,p.castInput=function(e){var t=this.options,n=t.undefinedReplacement,o=t.stringifyReplacer,r=void 0===o?function(e,t){return void 0===t?n:t}:o;return"string"==typeof e?e:JSON.stringify(c(e,null,null,r),r,"  ")},p.equals=function(t,n){return e.prototype.equals.call(p,t.replace(/,([\r\n])/g,"$1"),n.replace(/,([\r\n])/g,"$1"))};var l=new e;function f(e){return[...e].map((e=>e.innerHTML)).join("").trim()}l.tokenize=function(e){return e.slice()},l.join=l.removeEmpty=function(e){return e},function(){if(!document.querySelector("span#typearrow"))return;const e="code#typeans",t=`${e} > span[class^="type"]`,o=`${e} br ~ span[class^="type"]`,r=[...document.querySelectorAll(t)],s=[...document.querySelectorAll(o)],i=r.filter((e=>!s.includes(e)&&!e.classList.contains("typeMissed"))),u=document.querySelector(e),a=f(i),p=(c=a,l=f(s),d={ignoreCase:!0},n.diff(c,l,d));var c,l,d;if(1===p.length)s.forEach((e=>e.setAttribute("class","typeGood"))),u.innerHTML=s.map((e=>e.outerHTML)).join("");else{let e=[],t=[],n=a.split("");p.forEach((o=>{const r=o.added?"typeMissed":o.removed?"typeBad":"typeGood",s=o.added?"typeBad":o.removed?"typeMissed":"typeGood";let i="",u="";var a;"typeMissed"===r?("typeBad",(a=e).length>0&&a.at(-1).includes("typeBad")||(i='<span class="typeMissed">-</span>'.repeat(o.value.length))):i=`<span class="${r}">${n.splice(0,o.value.length).join("")}</span>`,"typeMissed"!==s&&(u=`<span class="${s}">${o.value}</span>`),e.push(i),t.push(u)})),u.innerHTML=`${e.join("")}<br><span id="typearrow">â‡©</span><br>${t.join("")}`}}()})();